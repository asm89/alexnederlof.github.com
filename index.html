
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>LexTech</title>
  <meta name="author" content="Alex Nederlof">

  
  <meta name="description" content="About a month ago we started to use Puppet at Magnet.me. Puppet now automates all our server provisioning from our dev server, to the Raspberry Pi we &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alex.nederlof.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/css/blog.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="LexTech" type="application/atom+xml">

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script defer src="/javascripts/jquery-2.0.3.min.js"></script>
<script defer src="/javascripts/bootstrap.min.js"></script>
  
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-19911045-4', 'nederlof.com');
	  ga('send', 'pageview');
	</script>


</head>

<body>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Lextech</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
        <li><a href="/">Blog</a></li>
		<li><a href="/about/">About</a></li>
		<li><a href="/blog/archives">Archives</a></li>
      </ul>

		<ul class="nav navbar-nav navbar-right">
			<li><a href="https://github.com/alexnederlof" title="GitHub: @alexnederlof"><i class="fa fa-github fa-2x"></i></a>
			<li><a href="https://twitter.com/alexnederlof" title="Twitter: @alexnederlof"><i class="fa fa-twitter fa-2x"></i></a>
			<li><a href="http://stackoverflow.com/users/679913/alex" title="Stack Exchange: @alexnederlof"><i class="fa fa-stack-overflow fa-2x"></i></a>
			<li><a href="http://nl.linkedin.com/in/alexnederlof/" title="LinkedIn: @alexnederlof"><i class="fa fa-linkedin fa-2x"></i></a>
		</ul>
			
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>
  <div class="container">
	  <div class="row">
			<div class="blog-index col-lg-8">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/25/running-and-testing-puppet-master-locally/">Running and Testing Puppet Master Locally</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-12-25T13:33:00+01:00" pubdate data-updated="true">Dec 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>About a month ago we started to use <a href="http://puppetlabs.com/">Puppet</a> at <a href="http://magnet.me">Magnet.me</a>. Puppet now automates all our server provisioning from our dev server, to the Raspberry Pi we have running at the office. While learning Puppet, we could not find any information about developing Puppet manifests locally and testing them on local copies of the machines. As a result, we ended up editing the Puppet manifests directly over an SSH connection. This prevented us from having a nice pull-request Git flow and often led to syntax errors in the manifests making it impossible for operational nodes to update. In this blog post, I will explain the solution we came up with to test our configurations on local VMs.</p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2013/12/25/running-and-testing-puppet-master-locally/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/28/caching-using-annotations-with-jersey/">Cache-Control Using Annotations With Jersey</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-07-28T12:02:00+02:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Building RESTful services with Jax-RX is awesome, but there&rsquo;s no annotation based notation to set your <code>Cache-Control</code> headers. You can either set the Cache-Control headers using a filter based on a URL pattern and map your responses through there, or you can use the <a href="http://jersey.java.net/nonav/apidocs/1.12/jersey/javax/ws/rs/core/Response.ResponseBuilder.html">ResponseBuiler</a> with the <a href="http://jersey.java.net/nonav/apidocs/1.12/jersey/javax/ws/rs/core/CacheControl.html">CacheControl</a> class like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">CacheControl</span> <span class="n">control</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CacheControl</span><span class="o">();</span>
</span><span class='line'><span class="n">control</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>
</span><span class='line'><span class="n">Response</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">myEntity</span><span class="o">).</span><span class="na">cacheControl</span><span class="o">(</span><span class="n">control</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, I would rather have something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@GET</span>
</span><span class='line'><span class="nd">@CacheMaxAge</span><span class="o">(</span><span class="n">time</span> <span class="o">=</span> <span class="mi">10</span><span class="o">,</span> <span class="n">unit</span> <span class="o">=</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">MINUTES</span><span class="o">)</span>
</span><span class='line'><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/awesome&quot;</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="n">String</span> <span class="nf">returnSomethingAwesome</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">...</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>It turns out that&rsquo;s pretty easy to set-up. I mostly use either no caching at all or caching for a certain period.</p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2013/07/28/caching-using-annotations-with-jersey/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/08/using-git-submodules-for-maven-artifacts-not-in-central/">Using Git Submodules for Maven Artifacts Not in Central</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-07-08T12:04:00+02:00" pubdate data-updated="true">Jul 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sometimes you come across a project (or a branch of a project) that you need and isn&rsquo;t in <a href="http://search.maven.org">Maven central</a>. If you own your own Maven repository that&rsquo;s no problem: you simply deploy the project to your own Maven repository and you are done. However, when you don&rsquo;t have your own Maven repository things get complicated.</p>

<p>You could install the other project in you local Maven repository using <code>mvn install</code>. After that you tell other developers via the README that they need to do the same. However, this requires manual effort, which is always more error-prone. You&rsquo;d like to have Maven build that project automatically.</p>

<p>An alternative is to copy/paste the code from that project into your project. This is also not the best idea: you&rsquo;ll loose track of the version you&rsquo;ve imported, you&rsquo;ll have code that doesn&rsquo;t belong to you in your repository, chances are that no one will update the code after that initial import because it might break, and finally there might be some licensing issues.</p>

<p>There is a third option which is a bit more elegant (albeit not perfect). You can import the third party project as a <a href="http://git-scm.com/book/en/Git-Tools-Submodules">Git submodule</a> or using <a href="http://git-scm.com/book/ch6-7.html">Git subtree merging</a>. Here are the main differences:</p>

<ul>
<li>You can use <em>submodules</em> if you want to use the code but not import their repository in yours. This is useful if you want to contribute back to the original repository, or the original repository is very large and you don&rsquo;t want to bloat your repository. In other words: this will only link to the other repository.</li>
<li>You can use <em>subtree merging</em> if you just want to import the code into your repository. This is useful if you just want read-only access to the other repository and you&rsquo;re not planning to contribute back to that repository.</li>
</ul>


<p>For more info about the differences read <a href="http://blogs.atlassian.com/2013/05/alternatives-to-git-submodule-git-subtree/">this blog</a> by Atlasssian.</p>

<p>I&rsquo;m going to focus on using submodules, but you can do the same trick with Maven using subtree merging. I recommend <a href="http://nuclearsquid.com/writings/subtree-merging-and-you/">this excellent guide</a> for subtree merging if you decided to go that way. Here&rsquo;s how it works for <em>submodules</em>:</p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2013/07/08/using-git-submodules-for-maven-artifacts-not-in-central/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/24/the-truth-about-code-reviews/">The Truth About Code Reviews</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-05-24T16:31:00+02:00" pubdate data-updated="true">May 24<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the <a href="http://2013.icse-conferences.org/">International Conference of Software Engineering 2013 </a> I visited a great talk by <a href="https://twitter.com/sback_">Alberto Bacchelli</a> on modern code reviews. It resonated with my experience with code reviews and I&rsquo;d like to share the highlights of <a href="http://www.inf.usi.ch/phd/bacchelli/publications/icse2013.pdf">his research</a> conducted among 17 developers from 16 different teams at Microsoft.</p>

<p>Most developers have to do some kind of code reviewing at some point. When you use GitHub for example, every pull request can be seen as a code review. At some companies like Microsoft, Google and Facebook, code reviews are part of the job. To make it easy for developers they work with specialized tools like <a href="https://developers.google.com/appengine/articles/rietveld">Google&rsquo;s Rietveld</a>, <a href="http://phabricator.org/">Facebook&rsquo;s Phabricator</a> or the Open Source tool <a href="https://code.google.com/p/gerrit/">Gerrit</a>. We do code reviews because it is well known that <a href="http://www.youtube.com/watch?v=CKjRt48rZGk">code reviews offer many advantages</a>. When I have to explain to someone why code reviews are important, I come up with the same arguments most developers come up with (in order of importance):</p>

<ol>
<li>finding defects</li>
<li>code quality improvement</li>
<li>alternative Solutions</li>
<li>knowledge Transfer</li>
<li>shared code ownership</li>
</ol>


<p>However, research shows a different result:</p>

<blockquote><p>Although the top motivation driving code reviews is still finding defects, the practice and the actual outcomes are less about finding errors than expected: Defect related comments comprise a small proportion and mainly cover small logical low-level issues</p></blockquote>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2013/05/24/the-truth-about-code-reviews/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/18/visiting-github/">Visiting GitHub</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-05-18T17:22:00+02:00" pubdate data-updated="true">May 18<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="img-right" src="/images/github/table.jpg" width="300" title="Employee finder" > After Tweeting some of the employees GitHub, the most popular online code hosting platform allowed us to visit one of their offices in San Francisco. GitHub was launched in 2008 and is truly a unique company. It has over 170 employees of which 60% work outside the office all over the world. Employees are encouraged to travel as much as they like. They have a big interactive table (photo) that shows where the employees are on a 3D map. Besides having complete freedom with your workplace and schedule, GitHub also doesn’t have any managers. Employees are expected to pick up work themselves and form their own teams. Everything happens distributively using online tools to form discussions and to arrange votes. From hiring new employees to choosing what kind of coffee mugs should be available in the kitchen; everything is democratic. Half the company looks like a Starbucks cafe for people who don’t care for a desk.</p>

<p>Visiting a company like GitHub, with a radically different management style was inspiring and it was awesome to see the people behind such a great company.</p>

<p><img class="img-responsive" src="/images/github/cafe.jpg" width="1000" title="Cafe" ></p>
</div>
  
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/22/latex-build-server/">LaTeX Build Server</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2013-02-22T10:58:00+01:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently had to work with <a href="http://www.LaTeX-project.org/">LaTeX</a> again. Although LaTeX has its perks like a proper equation editor and BibTex I don&rsquo;t like working with it for several reasons:</p>

<ol>
<li>there is no proper <a href="http://en.wikipedia.org/wiki/WYSIWYG">WYSIWYG</a> editor that compiles while you type for OS X and the source files are hard to read by themselves</li>
<li>you have to manually configure that it compiles LaTeX, then bibtex, and then LaTeX twice</li>
<li>the horrors of positioning and loading images with all the different compilers, bounding boxes, etc.</li>
<li>the fact that they have their own <a href="http://tex.stackexchange.com/">Stack exchange Q&amp;A</a> is an indication of how arcane it is.</li>
</ol>


<p>Because the source files are so unpleasant to read, you always have to make sure you send the compiled latest version of your document to the right people. What I like about some MarkDown related projects like <a href="https://github.com/mojombo/jekyll">Jekyll</a> and <a href="octopress.org">Octopress</a> is the way you can push the source to for example GitHub, and they build the site for you. I wanted that for LaTeX as well. Using a simple script I now have my own LaTeX build server. This way my colleagues and I can always see the latest version of the document in any browser so I don&rsquo;t have to think about distributing the latest version to the right people or devices.</p>

<p>The end result is nice and simple listing of the PDF, diff and log in a folder that indicates the build date:</p>

<p><img class="[End result]" src="/images/latex-build.png" title="End result" ></p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2013/02/22/latex-build-server/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/19/clean-test-classes-using-junits-classrules/">Clean Test Classes Using JUnit&#8217;s Rules</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2012-12-19T21:23:00+01:00" pubdate data-updated="true">Dec 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A couple of days ago I discovered the beauty of JUnit&rsquo;s <a href="http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestRule.html">TestRules</a> while searching for an easy way to set a time-out on all tests in a testcase. JUnit has a built-in rule for this called <a href="http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/Timeout.html"><code>Timeout</code></a>. You can set this rule for every test in your class by setting the timeout in a field like this:</p>

<figure class='code'><figcaption><span>Setting a Timeout Rule</span><a href='http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/Timeout.html'>View the Javadoc</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyTest</span> <span class="o">{</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nd">@Rule</span>
</span><span class='line'>  <span class="kd">public</span> <span class="n">MethodRule</span> <span class="n">globalTimeout</span><span class="o">=</span> <span class="k">new</span> <span class="n">Timeout</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">someTest</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="o">...</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  
</span></code></pre></td></tr></table></div></figure>


<p>Another gem is the <code>ExpectedException</code> rule, which allows you to inspect a thrown exception in several ways.</p>

<figure class='code'><figcaption><span>Inspecting excptions</span><a href='http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/ExpectedException.html'>View the Javadoc</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">HasExpectedException</span> <span class="o">{</span>
</span><span class='line'>  <span class="nd">@Rule</span>
</span><span class='line'>  <span class="kd">public</span> <span class="n">ExpectedException</span> <span class="n">thrown</span><span class="o">=</span> <span class="n">ExpectedException</span><span class="o">.</span><span class="na">none</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwsNothing</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="c1">// no exception expected, none thrown: passes.</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwsNullPointerException</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">thrown</span><span class="o">.</span><span class="na">expect</span><span class="o">(</span><span class="n">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>      <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">();</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwsNullPointerExceptionWithMessage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">thrown</span><span class="o">.</span><span class="na">expect</span><span class="o">(</span><span class="n">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>      <span class="n">thrown</span><span class="o">.</span><span class="na">expectMessage</span><span class="o">(</span><span class="s">&quot;happened?&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="n">thrown</span><span class="o">.</span><span class="na">expectMessage</span><span class="o">(</span><span class="n">startsWith</span><span class="o">(</span><span class="s">&quot;What&quot;</span><span class="o">));</span>
</span><span class='line'>      <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">(</span><span class="s">&quot;What happened?&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The great thing is, it&rsquo;s super easy to extend one of these rules.</p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2012/12/19/clean-test-classes-using-junits-classrules/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/21/integration-testing-with-jetty/">Integration Testing With Jetty</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2012-11-21T16:23:00+01:00" pubdate data-updated="true">Nov 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a followup after <a href="/blog/2012/11/21/separating-the-fast-from-the-slow-junit-tests/">my previous post about separating JUnit tests into fast tests and integration tests</a>. The sample code is <a href="https://github.com/alexnederlof/integration-testing-example">available on GitHub</a>.</p>

<p>When building a web application I like to have an integration test suite that resembles the real life situation as best as possible. The code should be able to run without too much effort from a build server like <a href="http://jenkins-ci.org/">Jenkins</a> and it should be fairly easy to maintain. In this post I will explain how I achieved these goals.</p>

<p>To see what this example app does run the server by running the main method in <code>com.alexnederlof.inttesting.MyWebServer.java</code> and brows to <a href="">http://localhost:9090</a>. You can do this from your favorite IDE.</p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2012/11/21/integration-testing-with-jetty/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/21/separating-the-fast-from-the-slow-junit-tests/">Separating the Fast From the Slow JUnit Tests</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2012-11-21T16:16:00+01:00" pubdate data-updated="true">Nov 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For some time now I was looking for a good way to do real integration testing with JUnit. These tests tests tend to be slow because the whole stack has to be build up and shut down. Furthermore, some tests also need a specific environment like a database connection which is not available to any developer. That’s why you probably want to split up your test suite in fast and slow (or dependent) tests. JUnit has a technique to split up these tests using <a href="http://kentbeck.github.com/junit/javadoc/4.10/org/junit/experimental/categories/Categories.html">Categories</a>. This allows you to specify the category your tests belongs to and then skip those tests in your Suite like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@RunWith</span><span class="o">(</span><span class="n">Categories</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class='line'><span class="nd">@IncludeCategory</span><span class="o">(</span><span class="n">SlowTests</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class='line'><span class="nd">@SuiteClasses</span><span class="o">(</span> <span class="o">{</span> <span class="n">A</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">B</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">SlowTestSuite</span> <span class="o">{</span> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The downside here is that you have to specify all the tests in the test suite. As far as I know, JUnit has no mechanism to do this for this for you. You can work with the <a href="http://maven.apache.org/plugins/maven-surefire-plugin/examples/junit.html#Using_JUnit_Categories">Maven Surefire plugin</a> to filter stuff in and out, but I think there’s a better way. A man by the name of <a href="http://www.johanneslink.net/">Johannes Link</a> built a <a href="http://www.johanneslink.net/projects/cpsuite.jsp">great little library</a> which does just what I want. I allows us to specify in a Suite to run all JUnit tests it can find. It can also exclude and include certain tests. Unfortunately  it doesn’t work with JUnit’s Categories system but it uses type inheritance. This makes it easy to filter out types of tests. For example I define all the fast tests like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@RunWith</span><span class="o">(</span><span class="n">ClasspathSuite</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">// Loads all unit tests it finds on the classpath</span>
</span><span class='line'><span class="nd">@ExcludeBaseTypeFilter</span><span class="o">(</span><span class="n">SlowTest</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">// Excludes tests that inherit SlowTest</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FastTests</span> <span class="o">{}</span>
</span></code></pre></td></tr></table></div></figure>




</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2012/11/21/separating-the-fast-from-the-slow-junit-tests/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/">Installing Selenium With Jenkins on Ubuntu</a></h1>
    
    
      <p class="meta"><i class="fa fa-clock-o"></i>
        








  


<time datetime="2012-11-19T16:01:00+01:00" pubdate data-updated="true">Nov 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week I fell in love with <a href="http://seleniumhq.org/">Selenium</a> and started to create some tests using the <a href="http://seleniumhq.org/projects/ide/">Firefox Selenium IDE</a>. If you’ve never done this I highly recommend trying it out. It’s really easy and great fun.</p>

<p>Now that I’ve created some great test suites I wanted to hook the tests to my Jenkins build server. There was no tutorial that covered everything online so here’s what I did:</p>

<p><strong>This will install Jenkins, Selenium standalone, Chrome and FireFox on a headless Ubuntu server.</strong></p>

</div>
  
  
    <footer>
      <a class='btn btn-primary' rel="full-article" href="/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/">Read on &rarr;</a>
    </footer>
  

<hr>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar col-lg-4">
  
    
<section class="well">
	<h4>Blog Search</h4>   
	<form action="http://google.com/search" method="get">
  		<fieldset role="search">
		   <div class="input-group">	
    		<input type="hidden" name="q" value="site:alex.nederlof.com" />
    		<input class="form-control" type="text" name="q" results="0" placeholder="Search"/>
			<span class="input-group-btn">
		        <button class="btn btn-default" type="button"><span class="fa fa-search"></span></button>
		    </span>
  </fieldset>
</form>
</section>

<section class="well">
  <h4>Recent Posts</h4>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/25/running-and-testing-puppet-master-locally/">Running and testing Puppet master locally</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/28/caching-using-annotations-with-jersey/">Cache-Control using annotations with Jersey</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/08/using-git-submodules-for-maven-artifacts-not-in-central/">Using Git submodules for Maven artifacts not in central</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/24/the-truth-about-code-reviews/">The truth about code reviews</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/18/visiting-github/">Visiting GitHub</a>
      </li>
    
  </ul>
</section>
<section>
	<p id="about">
		<a href="https://github.com/alexnederlof" title="GitHub: @alexnederlof"><i class="fa fa-github fa-3x"></i></a>
		<a href="https://twitter.com/alexnederlof" title="Twitter: @alexnederlof"><i class="fa fa-twitter fa-3x"></i></a>
		<a href="http://stackoverflow.com/users/679913/alex" title="Stack Exchange: @alexnederlof"><i class="fa fa-stack-overflow fa-3x"></i></a>
		<a href="http://nl.linkedin.com/in/alexnederlof/" title="LinkedIn: @alexnederlof"><i class="fa fa-linkedin fa-3x"></i></a>
	</p>
</section>
  
</aside>


      </div>
  	<footer><div class="row">
  <div class="col-lg-12">
	<p>
  	Copyright &copy; 2013 - Alex Nederlof -
  	<span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Theme by <a href="http://bootswatch.com">Bootswatch</a>.</span>
	</p>
  </div>
</div>
</footer>
  	

<script type="text/javascript">
      var disqus_shortname = 'lextech';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </div>
</body>
</html>

